import{j as c}from"./jsx-runtime-CkxqCPlQ.js";import{r as o}from"./index-DJO9vBfz.js";import{c as g}from"./cn-BM_CldAA.js";const O="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke='currentColor'%20%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='M19%209l-7%207-7-7'%20/%3e%3c/svg%3e",h=new Map;function L(){const n=e=>{const t=[];return e.ctrlKey&&t.push("ctrl"),e.shiftKey&&t.push("shift"),e.key&&t.push(e.key.toLowerCase()),t.join("+")};return{handleKeyDown:e=>{var l;const{target:t}=e;if((t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable)&&e.key!=="Enter")return;const a=n(e);h.has(a)&&((l=h.get(a))==null||l())},registerShortcut:(e,t)=>{h.set(e.toLowerCase(),t)},unregisterShortcut:e=>{h.delete(e.toLowerCase())}}}const K=({shortcutKey:n,handleChange:u,options:r})=>{const[i,e]=o.useState(!1),[t,a]=o.useState(-1),l=o.useRef(null),f=o.useRef([]),{registerShortcut:y,unregisterShortcut:x}=L(),m=()=>{e(s=>!s),a(-1)},d=o.useCallback(s=>{e(!1),a(-1),u(s)},[u]);o.useEffect(()=>(y(n,m),()=>x(n)),[]);const p=o.useCallback(s=>{i&&(s.key==="ArrowDown"?a(v=>(v+1)%r.length):s.key==="ArrowUp"?a(v=>(v-1+r.length)%r.length):s.key==="Escape"&&(e(!1),a(-1)))},[i,r.length]),b=o.useCallback(s=>{s.key==="Enter"&&t>=0&&(s.stopPropagation(),d(r[t]))},[t,d,r]),k=o.useCallback(s=>{l.current&&!l.current.contains(s.target)&&(e(!1),a(-1))},[]);return o.useEffect(()=>{var s;t>=0&&f.current[t]&&((s=f.current[t])==null||s.focus())},[t]),o.useEffect(()=>(document.addEventListener("keydown",p),document.addEventListener("mousedown",k),()=>{document.removeEventListener("keydown",p),document.removeEventListener("mousedown",k)}),[p,k]),{isOpen:i,focusedIndex:t,toggleDropdown:m,handleOptionClick:d,dropdownRef:l,optionRefs:f,handleOptionKeyDown:b}},D=({options:n,handleChange:u,selectedValue:r,shortcutKey:i,className:e,...t})=>{const{isOpen:a,toggleDropdown:l,handleOptionClick:f,dropdownRef:y,optionRefs:x,handleOptionKeyDown:m}=K({handleChange:u,shortcutKey:i,options:n});return c.jsxs("div",{className:g("relative rounded-lg bg-eastbay-50 text-2xl",e),ref:y,...t,children:[c.jsxs("button",{onClick:l,className:"flex h-full w-full items-center justify-between rounded-lg border-2 border-violet-950 px-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2",children:[c.jsx("span",{className:"w-full text-center",children:r}),c.jsx("img",{src:O,alt:"드롭다운 메뉴 토글버튼",className:g("h-5 w-5 transition-transform duration-200",a&&"rotate-180")})]}),c.jsx("div",{className:g("absolute left-0 z-10 w-full rounded-lg bg-eastbay-50 shadow-lg","origin-top transform transition-all duration-200",!a&&"invisible scale-y-0"),children:c.jsx("div",{className:"overflow-hidden rounded-lg",children:n.map((d,p)=>c.jsx("button",{ref:b=>x.current[p]=b,onClick:()=>f(d),onKeyDown:m,className:g("w-full p-2 text-center transition-colors duration-200 ease-in-out hover:bg-violet-100 focus:bg-violet-200"),children:d},p))})})]})};D.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},handleChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},selectedValue:{required:!0,tsType:{name:"string"},description:""},shortcutKey:{required:!0,tsType:{name:"ShortcutKey"},description:""}},composes:["HTMLAttributes"]};const E=["옵션 1","옵션 2","옵션 3"],R={title:"components/ui/Dropdown",component:D,argTypes:{options:{control:"object",description:"드롭다운에 표시될 옵션 목록"},selectedValue:{control:"select",options:E,description:"현재 선택된 값"},handleChange:{description:"값이 변경될 때 호출되는 함수",action:"changed"},className:{control:"text",description:"추가 스타일링"}},parameters:{docs:{description:{component:"사용자가 여러 옵션 중 하나를 선택할 수 있는 드롭다운 컴포넌트입니다.<br/><br/>드롭다운을 클릭하고 옵션을 선택해보세요."}}},tags:["autodocs"]},T=n=>{const[u,r]=o.useState(n.selectedValue);o.useEffect(()=>{r(n.selectedValue)},[n.selectedValue]);const i=e=>{r(e),n.handleChange(e)};return c.jsx(D,{...n,selectedValue:u,handleChange:i})},w={args:{selectedValue:E[0],options:E},render:n=>c.jsx(T,{...n})};var C,j,S;w.parameters={...w.parameters,docs:{...(C=w.parameters)==null?void 0:C.docs,source:{originalSource:`{
  args: {
    selectedValue: sampleOptions[0],
    options: sampleOptions
  },
  render: args => <DefaultExample {...args} />
}`,...(S=(j=w.parameters)==null?void 0:j.docs)==null?void 0:S.source}}};const A=["Default"];export{w as Default,A as __namedExportsOrder,R as default};
