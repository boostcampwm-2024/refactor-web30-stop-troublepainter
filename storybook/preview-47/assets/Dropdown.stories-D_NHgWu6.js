import{j as c}from"./jsx-runtime-CkxqCPlQ.js";import{r}from"./index-DJO9vBfz.js";import{c as h}from"./cn-BM_CldAA.js";const C="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke='currentColor'%20%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20d='M19%209l-7%207-7-7'%20/%3e%3c/svg%3e",j=(n,l=[])=>{const a=s=>{const e=[];return s.ctrlKey&&e.push("ctrl"),s.shiftKey&&e.push("shift"),s.key&&e.push(s.key.toLowerCase()),e.join("+")};r.useEffect(()=>{const s=e=>{const{target:o}=e;if((o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLElement&&o.isContentEditable)&&e.key!=="Enter")return;const i=a(e);for(const d of n)d.key.toLowerCase()===i&&d.action()};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[n,...l])},L=({shortcutKey:n,handleChange:l,options:a})=>{const[s,e]=r.useState(!1),[o,i]=r.useState(-1),d=r.useRef(null),p=r.useRef([]),g=r.useCallback(()=>{e(t=>!t),i(-1)},[]),f=r.useCallback(t=>{e(!1),i(-1),l(t)},[l]);j([{key:n,action:g}]);const m=r.useCallback(t=>{s&&(t.key==="ArrowDown"?i(x=>(x+1)%a.length):t.key==="ArrowUp"?i(x=>(x-1+a.length)%a.length):t.key==="Escape"&&(e(!1),i(-1)))},[s,a.length]),w=r.useCallback(t=>{t.key==="Enter"&&o>=0&&(t.stopPropagation(),f(a[o]))},[o,f,a]),u=r.useCallback(t=>{d.current&&!d.current.contains(t.target)&&(e(!1),i(-1))},[]);return r.useEffect(()=>{var t;o>=0&&p.current[o]&&((t=p.current[o])==null||t.focus())},[o]),r.useEffect(()=>(document.addEventListener("keydown",m),document.addEventListener("mousedown",u),()=>{document.removeEventListener("keydown",m),document.removeEventListener("mousedown",u)}),[m,u]),{isOpen:s,focusedIndex:o,toggleDropdown:g,handleOptionClick:f,dropdownRef:d,optionRefs:p,handleOptionKeyDown:w}},k=({options:n,handleChange:l,selectedValue:a,shortcutKey:s,className:e,...o})=>{const{isOpen:i,toggleDropdown:d,handleOptionClick:p,dropdownRef:g,optionRefs:f,handleOptionKeyDown:m}=L({handleChange:l,shortcutKey:s,options:n});return c.jsxs("div",{className:h("relative rounded-lg bg-eastbay-50 text-2xl",e),ref:g,...o,children:[c.jsxs("button",{onClick:d,className:"flex h-full w-full items-center justify-between rounded-lg border-2 border-violet-950 px-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2",children:[c.jsx("span",{className:"w-full text-center",children:a}),c.jsx("img",{src:C,alt:"드롭다운 메뉴 토글버튼",className:h("h-5 w-5 transition-transform duration-200",i&&"rotate-180")})]}),c.jsx("div",{className:h("absolute left-0 z-10 w-full rounded-lg bg-eastbay-50 shadow-lg","origin-top transform transition-all duration-200",!i&&"invisible scale-y-0"),children:c.jsx("div",{className:"overflow-hidden rounded-lg",children:n.map((w,u)=>c.jsx("button",{ref:t=>f.current[u]=t,onClick:()=>p(w),onKeyDown:m,className:h("w-full p-2 text-center transition-colors duration-200 ease-in-out hover:bg-violet-100 focus:bg-violet-200"),children:w},u))})})]})};k.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},handleChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},selectedValue:{required:!0,tsType:{name:"string"},description:""},shortcutKey:{required:!0,tsType:{name:"ShortcutKey"},description:""}},composes:["HTMLAttributes"]};const b=["옵션 1","옵션 2","옵션 3"],V={title:"components/ui/Dropdown",component:k,argTypes:{options:{control:"object",description:"드롭다운에 표시될 옵션 목록"},selectedValue:{control:"select",options:b,description:"현재 선택된 값"},handleChange:{description:"값이 변경될 때 호출되는 함수",action:"changed"},className:{control:"text",description:"추가 스타일링"}},parameters:{docs:{description:{component:"사용자가 여러 옵션 중 하나를 선택할 수 있는 드롭다운 컴포넌트입니다.<br/><br/>드롭다운을 클릭하고 옵션을 선택해보세요."}}},tags:["autodocs"]},O=n=>{const[l,a]=r.useState(n.selectedValue);r.useEffect(()=>{a(n.selectedValue)},[n.selectedValue]);const s=e=>{a(e),n.handleChange(e)};return c.jsx(k,{...n,selectedValue:l,handleChange:s})},y={args:{selectedValue:b[0],options:b},render:n=>c.jsx(O,{...n})};var v,E,D;y.parameters={...y.parameters,docs:{...(v=y.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    selectedValue: sampleOptions[0],
    options: sampleOptions
  },
  render: args => <DefaultExample {...args} />
}`,...(D=(E=y.parameters)==null?void 0:E.docs)==null?void 0:D.source}}};const S=["Default"];export{y as Default,S as __namedExportsOrder,V as default};
